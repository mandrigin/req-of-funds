{"id":"rff-0biz","title":"Digest: mol-witness-patrol","description":"Patrol 8: slit manifesting solution","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:52:23.862034+01:00","updated_at":"2026-01-25T13:52:23.862034+01:00","closed_at":"2026-01-25T13:52:23.861958+01:00","close_reason":"Squashed from 10 wisps","dependencies":[{"issue_id":"rff-0biz","depends_on_id":"rff-wisp-fiq","type":"parent-child","created_at":"2026-01-25T13:52:23.862841+01:00","created_by":"rff/witness"}]}
{"id":"rff-0enz","title":"Fix PDF highlights - PDFTextFinder returns wrong bounds","description":"attached_molecule: rff-wisp-1ek5\nattached_at: 2026-01-25T16:47:24Z\ndispatched_by: mayor\n\nPDFTextFinder.findPattern() uses document.findString() which searches from document start. If the same text appears on an earlier page, it returns wrong bounds. Need to use page.selection(for: range) based on character positions from the regex match instead. This is why screenshot highlights work (use Vision coordinates directly) but PDF highlights don't.","status":"closed","priority":2,"issue_type":"task","assignee":"rff/polecats/slit","created_at":"2026-01-25T17:46:55.727827+01:00","created_by":"mayor","updated_at":"2026-01-25T17:48:52.415138+01:00","closed_at":"2026-01-25T17:48:52.415139+01:00","dependencies":[{"issue_id":"rff-0enz","depends_on_id":"rff-wisp-1ek5","type":"blocks","created_at":"2026-01-25T17:47:23.995743+01:00","created_by":"mayor"}]}
{"id":"rff-0gnv","title":"Add Inbox/Confirmed tab filtering UI","description":"attached_molecule: rff-wisp-pvdb\nattached_at: 2026-01-25T15:23:35Z\ndispatched_by: mayor\n\nAdd two-tab or sidebar filter to separate unconfirmed (pending/underReview) from confirmed (approved/completed) documents. Use @Query with predicate filtering on RFFStatus.","status":"closed","priority":2,"issue_type":"task","assignee":"rff/polecats/toast","created_at":"2026-01-25T16:22:38.590429+01:00","created_by":"mayor","updated_at":"2026-01-25T16:34:10.205965+01:00","closed_at":"2026-01-25T16:34:10.205965+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rff-0gnv","depends_on_id":"rff-wisp-5vx9","type":"blocks","created_at":"2026-01-25T16:23:35.192116+01:00","created_by":"mayor"},{"issue_id":"rff-0gnv","depends_on_id":"rff-wisp-pvdb","type":"blocks","created_at":"2026-01-25T16:29:17.620148+01:00","created_by":"mayor"}]}
{"id":"rff-19ll","title":"Fix Re-detect button - doesn't update highlights","description":"attached_molecule: rff-wisp-2dmv\nattached_at: 2026-01-25T17:34:48Z\ndispatched_by: mayor\n\nRe-detect button calls detectAllFields() but nothing visually changes. Need to ensure detection updates highlights array and forces UI refresh.","status":"closed","priority":2,"issue_type":"task","assignee":"rff/polecats/morsov","created_at":"2026-01-25T18:34:15.026763+01:00","created_by":"mayor","updated_at":"2026-01-25T18:38:40.189451+01:00","closed_at":"2026-01-25T18:38:40.189451+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rff-19ll","depends_on_id":"rff-wisp-2dmv","type":"blocks","created_at":"2026-01-25T18:34:47.302174+01:00","created_by":"mayor"}]}
{"id":"rff-1gn","title":"Digest: mol-witness-patrol","description":"Patrol cycle 2: No changes. Furiosa still waiting on SSH fix (escalated). Refinery running. Clean inbox.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:10:23.288468+01:00","updated_at":"2026-01-25T13:10:23.288468+01:00","closed_at":"2026-01-25T13:10:23.28839+01:00","close_reason":"Squashed from 10 wisps"}
{"id":"rff-1iq7","title":"Fix screenshot paste - show preview and extract details","description":"attached_molecule: rff-wisp-94u9\nattached_at: 2026-01-25T16:32:30Z\ndispatched_by: mayor\n\nWhen pasting screenshots, no preview is shown and details are not being recognized/extracted. Fix the paste handler to display the image and run OCR extraction on pasted screenshots.","status":"hooked","priority":1,"issue_type":"bug","assignee":"rff/polecats/dementus","created_at":"2026-01-25T17:31:59.737557+01:00","created_by":"mayor","updated_at":"2026-01-25T17:32:30.56368+01:00","dependencies":[{"issue_id":"rff-1iq7","depends_on_id":"rff-wisp-94u9","type":"blocks","created_at":"2026-01-25T17:32:29.669335+01:00","created_by":"mayor"}]}
{"id":"rff-1jzo","title":"Fix Xcode project build - add missing files and disable Keychain","description":"attached_molecule: rff-wisp-g2k\nattached_at: 2026-01-25T12:49:01Z\ndispatched_by: mayor\n\n1) Add all missing Swift files to project.pbxproj (AppDelegate, Services/*, Models/*, Views/*, ML/*). 2) Remove or comment out Keychain/Touch ID code to avoid entitlements. 3) Remove entitlements file from project. Goal: clean build without code signing.","notes":"Implemented: Added all missing Swift files to project.pbxproj, removed entitlements and CODE_SIGN_ENTITLEMENTS to enable building without code signing. KeychainManager.swift excluded as it requires entitlements and is unused.","status":"closed","priority":0,"issue_type":"bug","assignee":"rff/polecats/slit","created_at":"2026-01-25T13:48:34.11677+01:00","created_by":"mayor","updated_at":"2026-01-25T13:57:48.909529+01:00","closed_at":"2026-01-25T13:57:48.909529+01:00","close_reason":"Build fix verified - BUILD SUCCEEDED","dependencies":[{"issue_id":"rff-1jzo","depends_on_id":"rff-wisp-g2k","type":"blocks","created_at":"2026-01-25T13:49:00.382706+01:00","created_by":"mayor"}]}
{"id":"rff-1pz6","title":"Investigate on-device LLM for macOS (Apple Intelligence / MLX)","description":"attached_molecule: rff-wisp-p1rc\nattached_at: 2026-01-25T17:32:20Z\ndispatched_by: mayor\n\nResearch options for on-device AI analysis without API keys:\n\n1. Apple Intelligence - check if Writing Tools or other APIs available for 3rd party apps\n2. MLX framework - run local models (Llama, Mistral, etc.)  \n3. Ollama integration - if user has Ollama installed\n4. Core ML with GGUF models\n\nGoal: Allow AI analysis without internet/API keys using on-device models.\n\nNote: Apple Intelligence APIs may be limited. MLX or Ollama might be more practical.","status":"closed","priority":2,"issue_type":"task","assignee":"rff/polecats/organic","created_at":"2026-01-25T18:31:47.599562+01:00","created_by":"mayor","updated_at":"2026-01-25T18:38:32.755368+01:00","closed_at":"2026-01-25T18:38:32.755368+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rff-1pz6","depends_on_id":"rff-wisp-p1rc","type":"blocks","created_at":"2026-01-25T18:32:19.938473+01:00","created_by":"mayor"}],"comments":[{"id":4,"issue_id":"rff-1pz6","author":"rff/polecats/organic","text":"Research complete: Documented 4 on-device LLM options in docs/on-device-llm-research.md. Recommended Apple Foundation Models (macOS 26+) as primary, MLX as secondary fallback. See docs for full comparison matrix and implementation phases.","created_at":"2026-01-25T17:37:51Z"}]}
{"id":"rff-35ho","title":"Wire up drag-drop invoice parsing end-to-end","description":"attached_molecule: rff-wisp-56s\nattached_at: 2026-01-25T13:13:34Z\ndispatched_by: mayor\n\nThe app builds but dropping invoices does nothing. Need to wire up: 1) Accept PDF drops in main view 2) Run Vision OCR on dropped PDF 3) Extract entities (org name, amount, due date) using EntityExtractionService 4) Create new RFFDocument/LineItem with extracted data 5) Display in table view 6) Save to SwiftData. Make the core flow work: drop PDF → see extracted invoice data in table.","status":"closed","priority":0,"issue_type":"bug","assignee":"rff/polecats/dementus","created_at":"2026-01-25T14:13:07.630902+01:00","created_by":"mayor","updated_at":"2026-01-25T14:26:38.628913+01:00","closed_at":"2026-01-25T14:26:38.628913+01:00","close_reason":"Merged and build verified","dependencies":[{"issue_id":"rff-35ho","depends_on_id":"rff-wisp-3tj","type":"blocks","created_at":"2026-01-25T14:13:33.380707+01:00","created_by":"mayor"},{"issue_id":"rff-35ho","depends_on_id":"rff-wisp-56s","type":"blocks","created_at":"2026-01-25T14:19:23.961168+01:00","created_by":"mayor"}]}
{"id":"rff-3emw","title":"Add amount and date extraction service","description":"attached_molecule: rff-wisp-q3gp\nattached_at: 2026-01-25T15:24:22Z\ndispatched_by: mayor\n\nCreate service to parse OCR text and extract monetary amounts (USD patterns like $1,234.56) and dates (various formats). Return structured ExtractedData with confidence scores and bounding box references.","notes":"Implemented AmountDateExtractionService that extracts monetary amounts (USD patterns) and dates from OCR observations while preserving bounding box references for document highlighting. Returns ExtractedData struct with confidence scores.","status":"closed","priority":2,"issue_type":"task","assignee":"rff/polecats/rictus","created_at":"2026-01-25T16:22:40.235402+01:00","created_by":"mayor","updated_at":"2026-01-25T16:29:40.960833+01:00","closed_at":"2026-01-25T16:29:40.960833+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rff-3emw","depends_on_id":"rff-wisp-q3gp","type":"blocks","created_at":"2026-01-25T16:24:21.943703+01:00","created_by":"mayor"}]}
{"id":"rff-3mq","title":"Build entity extraction with NaturalLanguage and custom regex","description":"attached_molecule: rff-wisp-4jk\nattached_at: 2026-01-25T12:45:16Z\ndispatched_by: mayor\n\nExtract entities from OCR text: 1) Use NLTagger with .nameType scheme and .joinNames option for organization names. 2) Use NSDataDetector for dates (.date type). 3) Implement custom regex for currency: $[\\d,]+\\.?\\d*|[\\d,]+\\.?\\d*\\s*(USD|dollars?) since NLTagger has no native currency support. 4) Combine into extraction pipeline returning org name, due date, and amount.","status":"closed","priority":1,"issue_type":"task","assignee":"rff/polecats/nux","created_at":"2026-01-25T12:59:33.576514+01:00","created_by":"mayor","updated_at":"2026-01-25T13:46:38.914549+01:00","closed_at":"2026-01-25T13:46:38.914549+01:00","close_reason":"Already implemented - commit dce31c8","dependencies":[{"issue_id":"rff-3mq","depends_on_id":"rff-air","type":"blocks","created_at":"2026-01-25T12:59:48.462048+01:00","created_by":"mayor"},{"issue_id":"rff-3mq","depends_on_id":"rff-9q4","type":"blocks","created_at":"2026-01-25T12:59:50.024477+01:00","created_by":"mayor"},{"issue_id":"rff-3mq","depends_on_id":"rff-wisp-4jk","type":"blocks","created_at":"2026-01-25T13:45:15.454486+01:00","created_by":"mayor"}]}
{"id":"rff-3z9n","title":"Digest: mol-witness-patrol","description":"Patrol 4: slit actively working, furiosa/nux idle","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:50:28.523176+01:00","updated_at":"2026-01-25T13:50:28.523176+01:00","closed_at":"2026-01-25T13:50:28.523074+01:00","close_reason":"Squashed from 10 wisps","dependencies":[{"issue_id":"rff-3z9n","depends_on_id":"rff-wisp-07i","type":"parent-child","created_at":"2026-01-25T13:50:28.524156+01:00","created_by":"rff/witness"}]}
{"id":"rff-5u36","title":"Digest: mol-witness-patrol","description":"Patrol 10: slit completed/nuked, furiosa/nux idle","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:57:39.819033+01:00","updated_at":"2026-01-25T13:57:39.819033+01:00","closed_at":"2026-01-25T13:57:39.818829+01:00","close_reason":"Squashed from 10 wisps","dependencies":[{"issue_id":"rff-5u36","depends_on_id":"rff-wisp-25d","type":"parent-child","created_at":"2026-01-25T13:57:39.820099+01:00","created_by":"rff/witness"}]}
{"id":"rff-5u9g","title":"Add AI Analyze button stub with TODO","description":"attached_molecule: rff-wisp-kwbq\nattached_at: 2026-01-25T15:30:35Z\ndispatched_by: mayor\n\nAdd an 'AI Analyze' button to the document detail view that will trigger LLM-based analysis. Keep as a stub with TODO comment for future implementation.","status":"closed","priority":2,"issue_type":"task","assignee":"rff/polecats/nux","created_at":"2026-01-25T16:28:12.541101+01:00","created_by":"mayor","updated_at":"2026-01-25T17:02:38.810265+01:00","closed_at":"2026-01-25T17:02:38.810265+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rff-5u9g","depends_on_id":"rff-wisp-5428","type":"blocks","created_at":"2026-01-25T16:30:35.234225+01:00","created_by":"mayor"},{"issue_id":"rff-5u9g","depends_on_id":"rff-wisp-yjgj","type":"blocks","created_at":"2026-01-25T16:33:20.791722+01:00","created_by":"mayor"},{"issue_id":"rff-5u9g","depends_on_id":"rff-wisp-y35c","type":"blocks","created_at":"2026-01-25T16:35:31.435214+01:00","created_by":"mayor"},{"issue_id":"rff-5u9g","depends_on_id":"rff-wisp-opbs","type":"blocks","created_at":"2026-01-25T16:40:46.593743+01:00","created_by":"mayor"},{"issue_id":"rff-5u9g","depends_on_id":"rff-wisp-ep9x","type":"blocks","created_at":"2026-01-25T16:44:55.58778+01:00","created_by":"mayor"},{"issue_id":"rff-5u9g","depends_on_id":"rff-wisp-cme3","type":"blocks","created_at":"2026-01-25T16:52:20.439154+01:00","created_by":"mayor"},{"issue_id":"rff-5u9g","depends_on_id":"rff-wisp-kwbq","type":"blocks","created_at":"2026-01-25T17:00:53.019555+01:00","created_by":"mayor"}]}
{"id":"rff-63o","title":"Digest: mol-witness-patrol","description":"Patrol cycle 6: Stable. No polecats, empty inbox.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:13:43.933936+01:00","updated_at":"2026-01-25T13:13:43.933936+01:00","closed_at":"2026-01-25T13:13:43.933842+01:00","close_reason":"Squashed from 10 wisps"}
{"id":"rff-66nd","title":"Fix document preview highlights not showing","description":"attached_molecule: rff-wisp-dgr0\nattached_at: 2026-01-25T16:30:46Z\ndispatched_by: mayor\n\nHighlights from OCR bounding boxes are not visible in the document preview. Debug DocumentPreviewView to ensure highlight overlays are being drawn correctly over extracted amounts and dates.","status":"closed","priority":1,"issue_type":"bug","assignee":"rff/polecats/slit","created_at":"2026-01-25T17:30:17.436536+01:00","created_by":"mayor","updated_at":"2026-01-25T17:38:47.346262+01:00","closed_at":"2026-01-25T17:38:47.346262+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rff-66nd","depends_on_id":"rff-wisp-24j5","type":"blocks","created_at":"2026-01-25T17:30:46.02349+01:00","created_by":"mayor"},{"issue_id":"rff-66nd","depends_on_id":"rff-wisp-dgr0","type":"blocks","created_at":"2026-01-25T17:35:27.712943+01:00","created_by":"mayor"}]}
{"id":"rff-6910","title":"Review and Confirm section should update when library selection changes - like the Info panel does","description":"attached_molecule: rff-wisp-qt48\nattached_at: 2026-01-25T17:52:09Z\ndispatched_by: mayor\n\nCurrently the Review and Confirm section may not be updating when a different document is selected in the library. It should sync with the Info panel behavior and show details for the currently selected document.","status":"hooked","priority":2,"issue_type":"task","assignee":"rff/polecats/coma","created_at":"2026-01-25T18:51:37.571578+01:00","created_by":"mayor","updated_at":"2026-01-25T18:52:10.097194+01:00","dependencies":[{"issue_id":"rff-6910","depends_on_id":"rff-wisp-qt48","type":"blocks","created_at":"2026-01-25T18:52:08.798667+01:00","created_by":"mayor"}]}
{"id":"rff-6io6","title":"Show total amounts in Library view","description":"attached_molecule: rff-wisp-judc\nattached_at: 2026-01-25T16:59:28Z\ndispatched_by: mayor\n\nIn Library view (ContentView):\n1. When documents are selected: show total amount for selected documents, grouped by currency if multiple currencies\n2. When nothing selected: show grand total of all documents in current tab (Inbox or Confirmed), grouped by currency\n\nDisplay at bottom of list or in toolbar. Format like: 'Total: $5,000 USD, €2,500 EUR'","status":"hooked","priority":2,"issue_type":"task","assignee":"rff/polecats/valkyrie","created_at":"2026-01-25T17:58:44.672252+01:00","created_by":"mayor","updated_at":"2026-01-25T17:59:29.042168+01:00","dependencies":[{"issue_id":"rff-6io6","depends_on_id":"rff-wisp-judc","type":"blocks","created_at":"2026-01-25T17:59:27.521683+01:00","created_by":"mayor"}]}
{"id":"rff-70k6","title":"Store OpenAI API key in UserDefaults instead of Keychain","description":"attached_molecule: rff-wisp-n3wu\nattached_at: 2026-01-25T17:04:04Z\ndispatched_by: mayor\n\nChange AIAnalysisService to:\n\n1. Store API keys in UserDefaults instead of Keychain (no permissions needed)\n2. Support BOTH OpenAI and Claude/Anthropic APIs\n3. Auto-detect available API:\n   - Check for ANTHROPIC_API_KEY env var\n   - Check for OPENAI_API_KEY env var  \n   - Check UserDefaults for stored keys\n4. Settings UI: toggle between OpenAI/Claude, enter API key for each\n5. Use Claude API format when Anthropic selected (messages endpoint)\n\nPriority: Claude support (since user has Claude Code running)","status":"closed","priority":2,"issue_type":"task","assignee":"rff/polecats/dag","created_at":"2026-01-25T18:03:21.447115+01:00","created_by":"mayor","updated_at":"2026-01-25T18:14:37.143567+01:00","closed_at":"2026-01-25T18:14:37.143567+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rff-70k6","depends_on_id":"rff-wisp-n3wu","type":"blocks","created_at":"2026-01-25T18:04:03.965626+01:00","created_by":"mayor"},{"issue_id":"rff-70k6","depends_on_id":"rff-wisp-bps1","type":"blocks","created_at":"2026-01-25T18:09:21.893555+01:00","created_by":"mayor"}]}
{"id":"rff-7884","title":"Digest: mol-witness-patrol","description":"Patrol complete: 1 active polecat (furiosa, user-active), 1 new (nux), refinery running, no MRs, inbox cleared","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:45:46.527703+01:00","updated_at":"2026-01-25T13:45:46.527703+01:00","closed_at":"2026-01-25T13:45:46.527623+01:00","close_reason":"Squashed from 8 wisps","dependencies":[{"issue_id":"rff-7884","depends_on_id":"rff-wisp-9l6","type":"parent-child","created_at":"2026-01-25T13:45:46.528525+01:00","created_by":"rff/witness"}]}
{"id":"rff-7bh","title":"Refinery Patrol","description":"Merge queue processor patrol loop with verification gates.","status":"open","priority":2,"issue_type":"molecule","created_at":"2026-01-25T12:56:13.431173+01:00","created_by":"mandrigin","updated_at":"2026-01-25T12:56:13.431173+01:00"}
{"id":"rff-7xu7","title":"Remove unnecessary 'title' field from Library view","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T18:54:31.300759+01:00","created_by":"mayor","updated_at":"2026-01-25T18:54:31.300759+01:00"}
{"id":"rff-7za","title":"Create Xcode project file (.xcodeproj)","description":"attached_molecule: rff-wisp-003\nattached_at: 2026-01-25T12:30:33Z\ndispatched_by: mayor\n\nCRITICAL: The RFF app has Swift source files but NO .xcodeproj file. Cannot build or run. Need to create RFF.xcodeproj with: 1) macOS 14+ deployment target, 2) SwiftUI App lifecycle, 3) SwiftData capability, 4) Entitlements file reference, 5) All existing source files added to target.","status":"closed","priority":0,"issue_type":"bug","assignee":"rff/polecats/slit","created_at":"2026-01-25T13:30:05.206503+01:00","created_by":"mayor","updated_at":"2026-01-25T13:35:17.175008+01:00","closed_at":"2026-01-25T13:35:17.175008+01:00","close_reason":"Merged to main","dependencies":[{"issue_id":"rff-7za","depends_on_id":"rff-wisp-003","type":"blocks","created_at":"2026-01-25T13:30:33.028949+01:00","created_by":"mayor"}]}
{"id":"rff-8iy7","title":"Add interactive document viewer with highlight overlays","description":"attached_molecule: rff-wisp-ug0m\nattached_at: 2026-01-25T15:30:11Z\ndispatched_by: mayor\n\nCreate DocumentPreviewView that shows PDF/image with overlay highlights for extracted amounts and dates. Use PDFKit for PDFs, NSImage for images. Draw semi-transparent rectangles over bounding boxes from OCR observations.","status":"closed","priority":2,"issue_type":"task","assignee":"rff/polecats/slit","created_at":"2026-01-25T16:22:41.269351+01:00","created_by":"mayor","updated_at":"2026-01-25T16:39:39.302611+01:00","closed_at":"2026-01-25T16:39:39.302611+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rff-8iy7","depends_on_id":"rff-3emw","type":"blocks","created_at":"2026-01-25T16:23:07.136561+01:00","created_by":"mayor"},{"issue_id":"rff-8iy7","depends_on_id":"rff-wisp-ctyg","type":"blocks","created_at":"2026-01-25T16:30:10.435841+01:00","created_by":"mayor"},{"issue_id":"rff-8iy7","depends_on_id":"rff-wisp-tr0w","type":"blocks","created_at":"2026-01-25T16:32:56.771168+01:00","created_by":"mayor"},{"issue_id":"rff-8iy7","depends_on_id":"rff-wisp-ug0m","type":"blocks","created_at":"2026-01-25T16:34:44.242683+01:00","created_by":"mayor"}]}
{"id":"rff-9q4","title":"Implement Vision OCR pipeline for document text extraction","description":"attached_molecule: rff-wisp-12u\nattached_at: 2026-01-25T12:21:41Z\ndispatched_by: mayor\n\nBuild document scanning module: 1) Use VNRecognizeTextRequest with .accurate level and usesLanguageCorrection=true. 2) Add customWords for financial terms (RFF, disbursement, requisition). 3) Use new async RecognizeTextRequest API. 4) Handle NSOpenPanel for file selection (VNDocumentCameraViewController is iOS-only). 5) Limit concurrent Vision requests to 5-10. 6) Use autoreleasepool for batch processing. 7) Return structured text observations.","status":"closed","priority":1,"issue_type":"task","assignee":"rff/polecats/furiosa","created_at":"2026-01-25T12:59:32.168551+01:00","created_by":"mayor","updated_at":"2026-01-25T13:23:54.697388+01:00","closed_at":"2026-01-25T13:23:54.697388+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rff-9q4","depends_on_id":"rff-air","type":"blocks","created_at":"2026-01-25T12:59:48.378859+01:00","created_by":"mayor"}]}
{"id":"rff-9wrf","title":"Add Paid tab as archive with payment date","description":"attached_molecule: rff-wisp-om9p\nattached_at: 2026-01-25T16:59:55Z\ndispatched_by: mayor\n\nAdd third tab 'Paid' to Library view (after Inbox, Confirmed):\n1. New status: paid (add to RFFStatus enum)\n2. 'Paid' tab shows documents with status=paid\n3. Add paidDate field to RFFDocument (editable)\n4. When marking as paid, prompt for payment date (default today)\n5. Paid documents show payment date in list\n\nFlow: Inbox → Confirmed → Paid (archive)","status":"closed","priority":2,"issue_type":"task","assignee":"rff/polecats/keeper","created_at":"2026-01-25T17:58:57.171171+01:00","created_by":"mayor","updated_at":"2026-01-25T18:08:33.829872+01:00","closed_at":"2026-01-25T18:08:33.829872+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rff-9wrf","depends_on_id":"rff-wisp-om9p","type":"blocks","created_at":"2026-01-25T17:59:54.807559+01:00","created_by":"mayor"}],"comments":[{"id":3,"issue_id":"rff-9wrf","author":"rff/polecats/keeper","text":"Implemented: Added 'paid' status to RFFStatus enum, paidDate field to RFFDocument, 'Paid' tab to Library view, StatusBadge styling for paid status, Mark as Paid button with date picker sheet. Documents flow: Inbox → Confirmed → Paid (archive).","created_at":"2026-01-25T17:07:58Z"}]}
{"id":"rff-a47","title":"RFF Tracker macOS App","description":"macOS Sequoia 14+ native app for tracking Requests for Funds. Uses Vision OCR, NaturalLanguage, Core ML classification, SwiftData persistence, SwiftUI document architecture, UserNotifications for deadlines, PDFKit for documents, Security/Keychain for credentials.","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-25T12:59:04.69687+01:00","created_by":"mayor","updated_at":"2026-01-25T12:59:04.69687+01:00"}
{"id":"rff-a7l","title":"Witness Patrol","description":"Per-rig worker monitor patrol loop with progressive nudging.","status":"open","priority":2,"issue_type":"molecule","created_at":"2026-01-25T12:56:13.227321+01:00","created_by":"mandrigin","updated_at":"2026-01-25T12:56:13.227321+01:00"}
{"id":"rff-air","title":"Setup Xcode project with SwiftData schema and entitlements","description":"attached_molecule: rff-wisp-7iw\nattached_at: 2026-01-25T12:00:28Z\ndispatched_by: mayor\n\nCreate new macOS app targeting Sequoia 14+. Configure: 1) SwiftData with RFFDocument model (id, title, requestingOrganization, amount Decimal, dueDate, status enum, extractedText, documentPath) and LineItem relationship. 2) Add VersionedSchema for migrations. 3) Set required entitlements: app-sandbox, network.client, calendars, files.user-selected.read-write, files.bookmarks.app-scope. 4) Enable Hardened Runtime for notarization.","status":"closed","priority":1,"issue_type":"task","assignee":"rff/polecats/furiosa","created_at":"2026-01-25T12:59:31.203158+01:00","created_by":"mayor","updated_at":"2026-01-25T13:12:05.492825+01:00","closed_at":"2026-01-25T13:12:05.492825+01:00","close_reason":"Closed"}
{"id":"rff-b0s","title":"Digest: mol-witness-patrol","description":"Patrol cycle 4: Processed POLECAT_DONE for furiosa. Rig clean - no active polecats, refinery running.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:12:58.232845+01:00","updated_at":"2026-01-25T13:12:58.232845+01:00","closed_at":"2026-01-25T13:12:58.232767+01:00","close_reason":"Squashed from 10 wisps"}
{"id":"rff-b5h","title":"Implement Keychain storage with Touch ID protection","description":"attached_molecule: rff-wisp-py8\nattached_at: 2026-01-25T12:23:15Z\ndispatched_by: mayor\n\nSecurity layer: 1) Store API tokens in data protection keychain with kSecUseDataProtectionKeychain. 2) Use kSecAttrAccessibleWhenUnlocked. 3) Optional Touch ID with SecAccessControlCreateWithFlags and .userPresence. 4) Implement secure retrieval with proper error handling.","status":"closed","priority":1,"issue_type":"task","assignee":"rff/polecats/dementus","created_at":"2026-01-25T12:59:39.58935+01:00","created_by":"mayor","updated_at":"2026-01-25T13:28:55.527098+01:00","closed_at":"2026-01-25T13:28:55.527098+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rff-b5h","depends_on_id":"rff-air","type":"blocks","created_at":"2026-01-25T12:59:48.870415+01:00","created_by":"mayor"}],"comments":[{"id":1,"issue_id":"rff-b5h","author":"rff/polecats/dementus","text":"Implemented KeychainManager with:\n- Secure API token storage using kSecUseDataProtectionKeychain\n- kSecAttrAccessibleWhenUnlocked for access control\n- Optional Touch ID via SecAccessControlCreateWithFlags with .userPresence\n- Comprehensive error handling with KeychainError enum\n- Async API for SwiftUI integration\n- Added keychain-access-groups entitlement","created_at":"2026-01-25T12:28:15Z"}]}
{"id":"rff-b7jm","title":"Show document schema and add re-analyze button in Library","description":"attached_molecule: rff-wisp-a546\nattached_at: 2026-01-25T17:30:51Z\ndispatched_by: mayor\n\nIn Library document detail view:\n\n1. Show which schema is associated with this document (if any)\n2. Add 'Re-analyze with Schema' button that:\n   - Uses the document's schema to extract fields\n   - Updates document fields with extracted values\n   - Shows what was extracted and confidence scores\n\n3. After inline schema editing, allow immediate re-analysis with new schema\n\nThis makes schemas actually useful - user can refine schema and immediately see results.","notes":"Implemented: Added schemaId to RFFDocument model, created SchemaExtractionService for schema-based field extraction, added schema section to document detail view with Re-analyze button, added Schema Selector and Extraction Results sheets, enhanced InlineSchemaEditorView with Save \u0026 Extract workflow","status":"closed","priority":2,"issue_type":"task","assignee":"rff/polecats/ace","created_at":"2026-01-25T18:30:21.147893+01:00","created_by":"mayor","updated_at":"2026-01-25T18:44:08.659031+01:00","closed_at":"2026-01-25T18:44:08.659031+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rff-b7jm","depends_on_id":"rff-wisp-a546","type":"blocks","created_at":"2026-01-25T18:30:50.527252+01:00","created_by":"mayor"}]}
{"id":"rff-bvp","title":"Add PDFKit integration for document handling","description":"attached_molecule: rff-wisp-9zv\nattached_at: 2026-01-25T12:22:27Z\ndispatched_by: mayor\n\nPDF processing: 1) PDFDocument loading and text extraction via page.string. 2) Handle multi-page documents with autoreleasepool per page for memory. 3) Extract metadata (title, author) from documentAttributes. 4) Optional: PDFPageOverlayViewProvider for highlighting extracted amounts/dates.","notes":"Implemented: PDFService for text/metadata extraction with autoreleasepool per page, PDFViewer with highlight overlay support, PDFTextFinder for locating amounts/dates with regex patterns","status":"closed","priority":1,"issue_type":"task","assignee":"rff/polecats/slit","created_at":"2026-01-25T12:59:38.413014+01:00","created_by":"mayor","updated_at":"2026-01-25T13:29:01.898761+01:00","closed_at":"2026-01-25T13:29:01.898761+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rff-bvp","depends_on_id":"rff-air","type":"blocks","created_at":"2026-01-25T12:59:48.789095+01:00","created_by":"mayor"}]}
{"id":"rff-cfh0","title":"Wire up confirmation workflow and status transitions","description":"attached_molecule: rff-wisp-9b7h\nattached_at: 2026-01-25T15:51:09Z\ndispatched_by: mayor\n\nImplement confirm action: validate fields, update RFFDocument with confirmed values, transition status from pending/underReview to approved. Move document from Inbox view to Confirmed view.","notes":"Implemented confirmation workflow: added confirmed value fields to RFFDocument model, Confirm button in DocumentDetailView with validation, status transition from pending/underReview to approved. Document moves from Inbox to Confirmed tab automatically via existing filter logic.","status":"closed","priority":2,"issue_type":"task","assignee":"rff/polecats/furiosa","created_at":"2026-01-25T16:22:42.976949+01:00","created_by":"mayor","updated_at":"2026-01-25T17:04:05.444933+01:00","closed_at":"2026-01-25T17:04:05.444933+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rff-cfh0","depends_on_id":"rff-tuso","type":"blocks","created_at":"2026-01-25T16:23:07.334477+01:00","created_by":"mayor"},{"issue_id":"rff-cfh0","depends_on_id":"rff-wisp-1gxz","type":"blocks","created_at":"2026-01-25T16:51:09.352833+01:00","created_by":"mayor"},{"issue_id":"rff-cfh0","depends_on_id":"rff-wisp-jfio","type":"blocks","created_at":"2026-01-25T16:54:26.152867+01:00","created_by":"mayor"},{"issue_id":"rff-cfh0","depends_on_id":"rff-wisp-5aq5","type":"blocks","created_at":"2026-01-25T16:56:58.319699+01:00","created_by":"mayor"},{"issue_id":"rff-cfh0","depends_on_id":"rff-wisp-9b7h","type":"blocks","created_at":"2026-01-25T16:59:36.259819+01:00","created_by":"mayor"}]}
{"id":"rff-cjpl","title":"Fix Claude Code CLI detection - check common paths instead of relying on which command in sandboxed app","description":"attached_molecule: rff-wisp-w6oq\nattached_at: 2026-01-25T17:39:34Z\ndispatched_by: mayor","status":"closed","priority":2,"issue_type":"task","assignee":"rff/polecats/imperator","created_at":"2026-01-25T18:38:56.946692+01:00","created_by":"mayor","updated_at":"2026-01-25T18:43:41.237039+01:00","closed_at":"2026-01-25T18:43:41.237039+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rff-cjpl","depends_on_id":"rff-wisp-w6oq","type":"blocks","created_at":"2026-01-25T18:39:33.517098+01:00","created_by":"mayor"}]}
{"id":"rff-cn7l","title":"Add plain-text entry with AI analysis for new documents","description":"attached_molecule: rff-wisp-gc5z\nattached_at: 2026-01-25T17:06:57Z\ndispatched_by: mayor\n\nIn 'New Document' flow, add option to enter plain text:\n1. Add 'Paste Text' or 'Enter Text' option alongside PDF/image upload\n2. User can paste invoice text or type details\n3. 'Analyze' button runs AI analysis on the text to extract:\n   - Vendor/organization\n   - Amount\n   - Due date / payment terms\n   - Line items\n4. Pre-fill document fields from AI extraction\n5. User can review and edit before saving\n\nThis enables quick entry without needing a file.","status":"closed","priority":2,"issue_type":"task","assignee":"rff/polecats/ace","created_at":"2026-01-25T18:06:25.28418+01:00","created_by":"mayor","updated_at":"2026-01-25T18:19:11.403422+01:00","closed_at":"2026-01-25T18:19:11.403422+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rff-cn7l","depends_on_id":"rff-wisp-rncr","type":"blocks","created_at":"2026-01-25T18:06:56.985218+01:00","created_by":"mayor"},{"issue_id":"rff-cn7l","depends_on_id":"rff-wisp-9gep","type":"blocks","created_at":"2026-01-25T18:10:43.166819+01:00","created_by":"mayor"},{"issue_id":"rff-cn7l","depends_on_id":"rff-wisp-gc5z","type":"blocks","created_at":"2026-01-25T18:13:32.718349+01:00","created_by":"mayor"}]}
{"id":"rff-d1cc","title":"Improve app launch UX - show library instead of Open dialog","description":"attached_molecule: rff-wisp-qb20\nattached_at: 2026-01-25T16:31:28Z\ndispatched_by: mayor\n\nApp currently launches with awkward Open dialog. Change to show the Library window by default on launch, with option to create new document or import existing. Make the experience more intuitive.","status":"closed","priority":1,"issue_type":"feature","assignee":"rff/polecats/rictus","created_at":"2026-01-25T17:30:19.247473+01:00","created_by":"mayor","updated_at":"2026-01-25T17:35:54.835647+01:00","closed_at":"2026-01-25T17:35:54.835647+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rff-d1cc","depends_on_id":"rff-wisp-qb20","type":"blocks","created_at":"2026-01-25T17:31:27.651505+01:00","created_by":"mayor"}]}
{"id":"rff-ddsb","title":"Move filtering tabs (Inbox/Confirmed/Paid) to Library view instead of right pane","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T18:55:45.766944+01:00","created_by":"mayor","updated_at":"2026-01-25T18:55:45.766944+01:00"}
{"id":"rff-dew","title":"Build SwiftUI document-based app with table view","description":"attached_molecule: rff-wisp-vod\nattached_at: 2026-01-25T12:22:04Z\ndispatched_by: mayor\n\nCreate main SwiftUI interface: 1) DocumentGroup scene with FileDocument protocol. 2) Table view with columns: Title, Organization, Amount (currency format), Due Date. 3) Implement Transferable protocol for drag-drop with CodableRepresentation and FileRepresentation for PDFs. 4) Security-scoped bookmarks for persistent file access. 5) Settings scene. 6) ModelContainer configuration.","notes":"Implemented: DocumentGroup with FileDocument, Table views in ContentView and DocumentEditorView, Transferable protocol with CodableRepresentation and FileRepresentation, security-scoped bookmarks, Settings scene with 4 tabs. All requirements from task description completed.","status":"closed","priority":1,"issue_type":"task","assignee":"rff/polecats/nux","created_at":"2026-01-25T12:59:36.107998+01:00","created_by":"mayor","updated_at":"2026-01-25T13:40:23.245618+01:00","closed_at":"2026-01-25T13:40:23.245618+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rff-dew","depends_on_id":"rff-air","type":"blocks","created_at":"2026-01-25T12:59:48.624151+01:00","created_by":"mayor"},{"issue_id":"rff-dew","depends_on_id":"rff-wisp-vod","type":"blocks","created_at":"2026-01-25T13:31:05.289622+01:00","created_by":"mayor"}]}
{"id":"rff-dsu","title":"Digest: mol-witness-patrol","description":"Patrol cycle 5: Rig clean and stable. No polecats, empty inbox.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:13:26.709375+01:00","updated_at":"2026-01-25T13:13:26.709375+01:00","closed_at":"2026-01-25T13:13:26.709306+01:00","close_reason":"Squashed from 10 wisps"}
{"id":"rff-ev2g","title":"Fix currency not loading from document in edit form","description":"attached_molecule: rff-wisp-1ejs\nattached_at: 2026-01-25T17:15:51Z\ndispatched_by: mayor\n\nIn Library edit form, currency always shows USD instead of the document's actual currency. The @State currency variable needs to be initialized from document.currency, not defaulting to .usd","status":"closed","priority":2,"issue_type":"task","assignee":"rff/polecats/dag","created_at":"2026-01-25T18:15:17.752935+01:00","created_by":"mayor","updated_at":"2026-01-25T18:18:18.172385+01:00","closed_at":"2026-01-25T18:18:18.172385+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rff-ev2g","depends_on_id":"rff-wisp-1ejs","type":"blocks","created_at":"2026-01-25T18:15:50.672035+01:00","created_by":"mayor"}]}
{"id":"rff-fhxc","title":"Digest: mol-witness-patrol","description":"Patrol 9: slit thinking 3m35s","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:52:47.700802+01:00","updated_at":"2026-01-25T13:52:47.700802+01:00","closed_at":"2026-01-25T13:52:47.700553+01:00","close_reason":"Squashed from 10 wisps","dependencies":[{"issue_id":"rff-fhxc","depends_on_id":"rff-wisp-e71","type":"parent-child","created_at":"2026-01-25T13:52:47.701751+01:00","created_by":"rff/witness"}]}
{"id":"rff-fxke","title":"Add inline schema editing in Library document preview","description":"attached_molecule: rff-wisp-1mto\nattached_at: 2026-01-25T17:04:55Z\ndispatched_by: mayor\n\nIn Library view (ContentView), when viewing a document in the Review tab:\n1. Add 'Edit Schema' mode that overlays the document with draggable field markers\n2. User can drag text regions to assign them to schema fields (amount, date, vendor, etc.)\n3. Show field type picker when region is selected\n4. Save mapping to document's associated schema\n5. Use existing SchemaEditorView components/logic but embedded in the preview\n\nThis enables visual schema editing directly on the document without switching views.","notes":"Implemented inline schema editing mode in Library document preview. Added Edit Schema button to Review tab that enables visual field mapping with drag-and-drop support. Created InlineSchemaEditorView component reusing SchemaEditorViewModel logic.","status":"closed","priority":2,"issue_type":"task","assignee":"rff/polecats/morsov","created_at":"2026-01-25T18:04:24.827246+01:00","created_by":"mayor","updated_at":"2026-01-25T18:13:46.828299+01:00","closed_at":"2026-01-25T18:13:46.828299+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rff-fxke","depends_on_id":"rff-wisp-1mto","type":"blocks","created_at":"2026-01-25T18:04:54.374952+01:00","created_by":"mayor"}]}
{"id":"rff-gcja","title":"Use local Claude Code CLI instead of API key","description":"attached_molecule: rff-wisp-jcgu\nattached_at: 2026-01-25T17:23:51Z\ndispatched_by: mayor\n\nInstead of requiring user to enter Anthropic API key, detect and use local Claude Code installation:\n\n1. Check if 'claude' CLI is available in PATH\n2. If available, use 'claude --print' or similar to send prompts\n3. No API key needed - leverages user's existing Claude Code auth\n4. Fallback to API key if Claude Code not installed\n\nThis removes friction for users who already have Claude Code installed.","status":"closed","priority":2,"issue_type":"task","assignee":"rff/polecats/dag","created_at":"2026-01-25T18:23:20.515899+01:00","created_by":"mayor","updated_at":"2026-01-25T18:26:56.471708+01:00","closed_at":"2026-01-25T18:26:56.471708+01:00","close_reason":"Implemented: Claude Code CLI detection and usage. Auto-selects local CLI when available, falls back to API keys.","dependencies":[{"issue_id":"rff-gcja","depends_on_id":"rff-wisp-jcgu","type":"blocks","created_at":"2026-01-25T18:23:50.397185+01:00","created_by":"mayor"}]}
{"id":"rff-gn2v","title":"Swiss invoice support: Test and ensure extraction works for QST, AHV, KTG, UVG documents","description":"attached_molecule: rff-wisp-3d8z\nattached_at: 2026-01-25T17:51:29Z\ndispatched_by: mayor\n\nTest data at /Users/mandrigin/Downloads/swiss/ contains Swiss tax/insurance documents (QST=withholding tax, AHV=pension, KTG=sickness insurance, UVG=accident insurance). These are scanned PDFs requiring OCR. Ensure the app correctly extracts amounts, dates, and identifies these document types.","status":"closed","priority":2,"issue_type":"task","assignee":"rff/polecats/organic","created_at":"2026-01-25T18:50:36.198089+01:00","created_by":"mayor","updated_at":"2026-01-25T18:56:56.043118+01:00","closed_at":"2026-01-25T18:56:56.04312+01:00","dependencies":[{"issue_id":"rff-gn2v","depends_on_id":"rff-wisp-3d8z","type":"blocks","created_at":"2026-01-25T18:51:28.15433+01:00","created_by":"mayor"}]}
{"id":"rff-hxlk","title":"Digest: mol-witness-patrol","description":"Patrol 3: 3 polecats (slit working, furiosa/nux idle), refinery running","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:49:37.631968+01:00","updated_at":"2026-01-25T13:49:37.631968+01:00","closed_at":"2026-01-25T13:49:37.631898+01:00","close_reason":"Squashed from 10 wisps","dependencies":[{"issue_id":"rff-hxlk","depends_on_id":"rff-wisp-1b7","type":"parent-child","created_at":"2026-01-25T13:49:37.63285+01:00","created_by":"rff/witness"}]}
{"id":"rff-iq3z","title":"Add document drop zone and paste support","description":"Add drag-and-drop zone for PDF/image files and support for pasting images from clipboard. Should trigger OCR processing on drop/paste and create new RFFDocument in inbox.","notes":"Work already completed and merged via rff-35ho (drag-drop) and rff-qids (clipboard paste). Build verified.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:22:39.454776+01:00","created_by":"mayor","updated_at":"2026-01-25T16:31:51.753691+01:00","closed_at":"2026-01-25T16:31:46.824402+01:00","dependencies":[{"issue_id":"rff-iq3z","depends_on_id":"rff-wisp-vod6","type":"blocks","created_at":"2026-01-25T16:29:40.526119+01:00","created_by":"mayor"}]}
{"id":"rff-jbyu","title":"Wire SchemaEditorView into app navigation","description":"attached_molecule: rff-wisp-ijsa\nattached_at: 2026-01-25T16:55:20Z\ndispatched_by: mayor\n\nSchemaEditorView is implemented but not accessible from anywhere in the app. Need to:\n1. Add 'Manage Schemas' section in Settings with link to SchemaEditorView\n2. Add 'Edit Schema' or 'Map Fields' button in document detail view to open schema editor for current document\n3. Ensure AI Analyze button in DocumentEditorView actually triggers the schema suggestion flow","status":"closed","priority":2,"issue_type":"task","assignee":"rff/polecats/dag","created_at":"2026-01-25T17:54:53.104733+01:00","created_by":"mayor","updated_at":"2026-01-25T18:00:03.368878+01:00","closed_at":"2026-01-25T18:00:03.368878+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rff-jbyu","depends_on_id":"rff-wisp-ijsa","type":"blocks","created_at":"2026-01-25T17:55:19.467117+01:00","created_by":"mayor"}]}
{"id":"rff-k8t","title":"Digest: mol-witness-patrol","description":"Patrol complete: furiosa has 1 unpushed commit (SSH issue, escalated to Mayor), refinery running, no cleanup wisps, inbox clean","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:08:59.010542+01:00","updated_at":"2026-01-25T13:08:59.010542+01:00","closed_at":"2026-01-25T13:08:59.010465+01:00","close_reason":"Squashed from 10 wisps"}
{"id":"rff-l9xi","title":"Digest: mol-witness-patrol","description":"Patrol 2: 2 polecats (furiosa user-active, nux nudged for API error), refinery running, no MRs, work rff-3mq already closed","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:48:14.878627+01:00","updated_at":"2026-01-25T13:48:14.878627+01:00","closed_at":"2026-01-25T13:48:14.878506+01:00","close_reason":"Squashed from 10 wisps","dependencies":[{"issue_id":"rff-l9xi","depends_on_id":"rff-wisp-p62","type":"parent-child","created_at":"2026-01-25T13:48:14.880256+01:00","created_by":"rff/witness"}]}
{"id":"rff-la8j","title":"AI Settings UX: Use dropdown for provider selection instead of tabbed interface with long scroll","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T18:42:36.40072+01:00","created_by":"mayor","updated_at":"2026-01-25T18:42:36.40072+01:00"}
{"id":"rff-m1v5","title":"Add tooltips to all toolbar buttons","description":"attached_molecule: rff-wisp-rhfs\nattached_at: 2026-01-25T17:28:39Z\ndispatched_by: mayor\n\nAdd explicit tooltips (using .help() modifier) to every toolbar button with descriptive text explaining what each button does.","status":"open","priority":2,"issue_type":"task","assignee":"rff/polecats/keeper","created_at":"2026-01-25T18:28:03.385675+01:00","created_by":"mayor","updated_at":"2026-01-25T18:57:06.127052+01:00","dependencies":[{"issue_id":"rff-m1v5","depends_on_id":"rff-wisp-rhfs","type":"blocks","created_at":"2026-01-25T18:28:38.256353+01:00","created_by":"mayor"}]}
{"id":"rff-mbe","title":"Deacon Patrol","description":"Mayor's daemon patrol loop for handling callbacks, health checks, and cleanup.","status":"open","priority":2,"issue_type":"molecule","created_at":"2026-01-25T12:56:13.020955+01:00","created_by":"mandrigin","updated_at":"2026-01-25T12:56:13.020955+01:00"}
{"id":"rff-n01n","title":"Digest: mol-witness-patrol","description":"Patrol 6: slit implementing fix, furiosa/nux idle","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:51:37.644539+01:00","updated_at":"2026-01-25T13:51:37.644539+01:00","closed_at":"2026-01-25T13:51:37.644462+01:00","close_reason":"Squashed from 10 wisps","dependencies":[{"issue_id":"rff-n01n","depends_on_id":"rff-wisp-tsl","type":"parent-child","created_at":"2026-01-25T13:51:37.645398+01:00","created_by":"rff/witness"}]}
{"id":"rff-n2ly","title":"Create macOS Sequoia-compliant app icon","description":"attached_molecule: rff-wisp-vqse\nattached_at: 2026-01-25T17:16:32Z\ndispatched_by: mayor\n\nCreate a professional app icon for RFF (Request for Funds) that follows macOS Sequoia design guidelines:\n\n1. Design requirements:\n   - Rounded square shape (standard macOS icon)\n   - Simple, recognizable symbol (document with money/checkmark concept)\n   - Clean colors that work in light and dark mode\n   - Professional look suitable for finance/document management\n\n2. Technical requirements:\n   - Generate AppIcon.appiconset with all required sizes (16x16 to 1024x1024)\n   - Update Assets.xcassets with proper Contents.json\n   - Follow Apple HIG for macOS icons\n\nSuggested concept: Document/paper with currency symbol or checkmark, representing 'request for funds approval'","notes":"Implemented: Generated macOS Sequoia-compliant app icon with deep blue background, white document with folded corner, and green checkmark badge representing approved requests. All required sizes (16x16 to 1024x1024) generated programmatically using Pillow. Build verified successful.","status":"closed","priority":2,"issue_type":"task","assignee":"rff/polecats/morsov","created_at":"2026-01-25T18:16:01.944648+01:00","created_by":"mayor","updated_at":"2026-01-25T18:22:36.225466+01:00","closed_at":"2026-01-25T18:22:36.225466+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rff-n2ly","depends_on_id":"rff-wisp-vqse","type":"blocks","created_at":"2026-01-25T18:16:31.779634+01:00","created_by":"mayor"}]}
{"id":"rff-nlu","title":"Implement deadline notifications with action buttons","description":"attached_molecule: rff-wisp-yyc\nattached_at: 2026-01-25T12:22:51Z\ndispatched_by: mayor\n\nUserNotifications integration: 1) Request authorization on first launch. 2) UNCalendarNotificationTrigger for 24-hour reminders before dueDate. 3) Create RFF_DEADLINE category with actions: Snooze 1 hour, Mark Complete. 4) Use threadIdentifier for grouping. 5) Handle notification actions in delegate. 6) Optional: EventKit calendar integration with EKAlarm.","notes":"Implemented NotificationService with UserNotifications integration, RFF_DEADLINE category with Snooze/Mark Complete actions, 24-hour deadline reminders using UNCalendarNotificationTrigger, threadIdentifier grouping, AppDelegate for action handling, and CalendarService for optional EventKit/EKAlarm integration.","status":"closed","priority":1,"issue_type":"task","assignee":"rff/polecats/rictus","created_at":"2026-01-25T12:59:37.434045+01:00","created_by":"mayor","updated_at":"2026-01-25T13:32:06.210309+01:00","closed_at":"2026-01-25T13:32:06.210309+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rff-nlu","depends_on_id":"rff-air","type":"blocks","created_at":"2026-01-25T12:59:48.707402+01:00","created_by":"mayor"}]}
{"id":"rff-o18n","title":"Add Cancel button to Library detail view - currently only Confirm \u0026 Submit exists","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T18:43:55.568888+01:00","created_by":"mayor","updated_at":"2026-01-25T18:43:55.568888+01:00"}
{"id":"rff-oxc6","title":"Make highlight legend a fixed compact header above document","description":"attached_molecule: rff-wisp-sld0\nattached_at: 2026-01-25T17:31:36Z\ndispatched_by: mayor\n\nThe highlight legend is too intrusive. Change to:\n\n1. Fixed compact header bar above the document view\n2. Horizontal layout with small colored squares + labels\n3. Document scrolls underneath the fixed legend\n4. Example: [■ Amount] [■ Date] [■ Vendor] [■ Invoice#] in a single row\n5. Keep it minimal - just color chips and short labels","notes":"Implemented: Changed legend to compact horizontal header bar above PDF viewer. Legend shows automatically when highlights exist - horizontal layout with small color chips (12x12) and short labels. Removed the toggle button. Document scrolls underneath the fixed legend.","status":"closed","priority":2,"issue_type":"task","assignee":"rff/polecats/imperator","created_at":"2026-01-25T18:31:05.544024+01:00","created_by":"mayor","updated_at":"2026-01-25T18:36:30.200735+01:00","closed_at":"2026-01-25T18:36:30.200735+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rff-oxc6","depends_on_id":"rff-wisp-sld0","type":"blocks","created_at":"2026-01-25T18:31:35.945037+01:00","created_by":"mayor"}]}
{"id":"rff-qids","title":"Add clipboard paste support for invoice images","description":"attached_molecule: rff-wisp-z92h\nattached_at: 2026-01-25T13:14:52Z\ndispatched_by: mayor\n\nSupport pasting images from clipboard (Cmd+V): 1) Listen for paste command in main view 2) Check NSPasteboard for image types (PNG, JPEG, TIFF) 3) Run Vision OCR on pasted image 4) Extract entities and create LineItem same as PDF flow. User should be able to screenshot an invoice and paste it directly.","notes":"Implemented clipboard paste support in ContentView:\n- Added onPasteCommand handler for PNG/JPEG/TIFF\n- Uses DocumentOCRService for Vision OCR\n- Uses EntityExtractionService for entity extraction\n- Creates RFFDocument with extracted data\n- Shows processing overlay during scan\nCommit: 25630cf","status":"closed","priority":0,"issue_type":"feature","assignee":"rff/polecats/capable","created_at":"2026-01-25T14:14:25.319259+01:00","created_by":"mayor","updated_at":"2026-01-25T14:26:49.992207+01:00","closed_at":"2026-01-25T14:26:38.633128+01:00","close_reason":"Merged and build verified","dependencies":[{"issue_id":"rff-qids","depends_on_id":"rff-wisp-5za","type":"blocks","created_at":"2026-01-25T14:14:51.299089+01:00","created_by":"mayor"},{"issue_id":"rff-qids","depends_on_id":"rff-wisp-z92h","type":"blocks","created_at":"2026-01-25T14:19:48.734757+01:00","created_by":"mayor"}]}
{"id":"rff-qvf","title":"Digest: mol-witness-patrol","description":"Patrol cycle 3: No changes. Stable wait state.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:11:06.609793+01:00","updated_at":"2026-01-25T13:11:06.609793+01:00","closed_at":"2026-01-25T13:11:06.609696+01:00","close_reason":"Squashed from 10 wisps"}
{"id":"rff-rff-crew-mandrigin","title":"Crew worker mandrigin in rff - human-managed persistent workspace.","description":"Crew worker mandrigin in rff - human-managed persistent workspace.\n\nrole_type: crew\nrig: rff\nagent_state: idle\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"open","priority":2,"issue_type":"agent","created_at":"2026-01-25T12:56:35.060306+01:00","created_by":"mandrigin","updated_at":"2026-01-25T12:56:35.060306+01:00","labels":["gt:agent"]}
{"id":"rff-rff-polecat-ace","title":"rff-rff-polecat-ace","description":"rff-rff-polecat-ace\n\nrole_type: polecat\nrig: rff\nagent_state: closed\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"closed","priority":2,"issue_type":"agent","created_at":"2026-01-25T18:05:17.087934+01:00","created_by":"mayor","updated_at":"2026-01-25T18:57:13.750594+01:00","closed_at":"2026-01-25T18:54:48.719931+01:00","close_reason":"polecat removed","labels":["gt:agent"]}
{"id":"rff-rff-polecat-capable","title":"rff-rff-polecat-capable","description":"rff-rff-polecat-capable\n\nrole_type: polecat\nrig: rff\nagent_state: closed\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"closed","priority":2,"issue_type":"agent","created_at":"2026-01-25T13:23:28.423494+01:00","created_by":"mayor","updated_at":"2026-01-25T17:32:53.75244+01:00","closed_at":"2026-01-25T16:55:53.436839+01:00","close_reason":"polecat removed","labels":["gt:agent"]}
{"id":"rff-rff-polecat-cheedo","title":"rff-rff-polecat-cheedo","description":"rff-rff-polecat-cheedo\n\nrole_type: polecat\nrig: rff\nagent_state: closed\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"closed","priority":2,"issue_type":"agent","created_at":"2026-01-25T16:30:16.755735+01:00","created_by":"mayor","updated_at":"2026-01-25T18:01:02.54583+01:00","closed_at":"2026-01-25T16:31:06.677294+01:00","close_reason":"polecat removed","labels":["gt:agent"]}
{"id":"rff-rff-polecat-coma","title":"rff-rff-polecat-coma","description":"rff-rff-polecat-coma\n\nrole_type: polecat\nrig: rff\nagent_state: spawning\nhook_bead: rff-6910\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"open","priority":2,"issue_type":"agent","created_at":"2026-01-25T18:51:49.526065+01:00","created_by":"mayor","updated_at":"2026-01-25T18:51:49.801931+01:00","labels":["gt:agent"]}
{"id":"rff-rff-polecat-dag","title":"rff-rff-polecat-dag","description":"rff-rff-polecat-dag\n\nrole_type: polecat\nrig: rff\nagent_state: closed\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"closed","priority":2,"issue_type":"agent","created_at":"2026-01-25T16:29:22.771945+01:00","created_by":"mayor","updated_at":"2026-01-25T18:23:31.439929+01:00","closed_at":"2026-01-25T18:19:06.136754+01:00","close_reason":"polecat removed","labels":["gt:agent"]}
{"id":"rff-rff-polecat-dementus","title":"rff-rff-polecat-dementus","description":"rff-rff-polecat-dementus\n\nrole_type: polecat\nrig: rff\nagent_state: closed\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"closed","priority":2,"issue_type":"agent","created_at":"2026-01-25T13:22:57.472408+01:00","created_by":"mayor","updated_at":"2026-01-25T17:32:11.780814+01:00","closed_at":"2026-01-25T16:55:56.18206+01:00","close_reason":"polecat removed","labels":["gt:agent"]}
{"id":"rff-rff-polecat-furiosa","title":"rff-rff-polecat-furiosa","description":"rff-rff-polecat-furiosa\n\nrole_type: polecat\nrig: rff\nagent_state: closed\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"closed","priority":2,"issue_type":"agent","created_at":"2026-01-25T13:00:00.335697+01:00","created_by":"mayor","updated_at":"2026-01-25T17:04:47.318865+01:00","closed_at":"2026-01-25T17:04:06.737116+01:00","close_reason":"polecat removed","labels":["gt:agent"]}
{"id":"rff-rff-polecat-imperator","title":"rff-rff-polecat-imperator","description":"rff-rff-polecat-imperator\n\nrole_type: polecat\nrig: rff\nagent_state: closed\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"closed","priority":2,"issue_type":"agent","created_at":"2026-01-25T18:31:16.7951+01:00","created_by":"mayor","updated_at":"2026-01-25T18:56:34.107241+01:00","closed_at":"2026-01-25T18:56:34.107241+01:00","close_reason":"polecat removed","labels":["gt:agent"]}
{"id":"rff-rff-polecat-keeper","title":"rff-rff-polecat-keeper","description":"rff-rff-polecat-keeper\n\nrole_type: polecat\nrig: rff\nagent_state: closed\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"closed","priority":2,"issue_type":"agent","created_at":"2026-01-25T17:59:36.277289+01:00","created_by":"mayor","updated_at":"2026-01-25T18:56:44.110079+01:00","closed_at":"2026-01-25T18:56:24.521867+01:00","close_reason":"polecat removed","labels":["gt:agent"]}
{"id":"rff-rff-polecat-morsov","title":"rff-rff-polecat-morsov","description":"rff-rff-polecat-morsov\n\nrole_type: polecat\nrig: rff\nagent_state: closed\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"closed","priority":2,"issue_type":"agent","created_at":"2026-01-25T18:04:35.729852+01:00","created_by":"mayor","updated_at":"2026-01-25T18:38:53.334694+01:00","closed_at":"2026-01-25T18:32:31.887815+01:00","close_reason":"polecat removed","labels":["gt:agent"]}
{"id":"rff-rff-polecat-nux","title":"rff-rff-polecat-nux","description":"rff-rff-polecat-nux\n\nrole_type: polecat\nrig: rff\nagent_state: closed\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"closed","priority":2,"issue_type":"agent","created_at":"2026-01-25T13:21:45.704064+01:00","created_by":"mayor","updated_at":"2026-01-25T17:00:35.210841+01:00","closed_at":"2026-01-25T16:55:58.900019+01:00","close_reason":"polecat removed","labels":["gt:agent"]}
{"id":"rff-rff-polecat-organic","title":"rff-rff-polecat-organic","description":"rff-rff-polecat-organic\n\nrole_type: polecat\nrig: rff\nagent_state: closed\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"closed","priority":2,"issue_type":"agent","created_at":"2026-01-25T18:32:01.024621+01:00","created_by":"mayor","updated_at":"2026-01-25T18:51:09.201822+01:00","closed_at":"2026-01-25T18:38:34.46766+01:00","close_reason":"polecat removed","labels":["gt:agent"]}
{"id":"rff-rff-polecat-rictus","title":"rff-rff-polecat-rictus","description":"rff-rff-polecat-rictus\n\nrole_type: polecat\nrig: rff\nagent_state: closed\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"closed","priority":2,"issue_type":"agent","created_at":"2026-01-25T13:22:33.215239+01:00","created_by":"mayor","updated_at":"2026-01-25T17:31:09.823365+01:00","closed_at":"2026-01-25T16:33:44.09099+01:00","close_reason":"polecat removed","labels":["gt:agent"]}
{"id":"rff-rff-polecat-slit","title":"rff-rff-polecat-slit","description":"rff-rff-polecat-slit\n\nrole_type: polecat\nrig: rff\nagent_state: closed\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"closed","priority":2,"issue_type":"agent","created_at":"2026-01-25T13:22:09.206052+01:00","created_by":"mayor","updated_at":"2026-01-25T17:49:11.924226+01:00","closed_at":"2026-01-25T17:38:48.795469+01:00","close_reason":"polecat removed","labels":["gt:agent"]}
{"id":"rff-rff-polecat-toast","title":"rff-rff-polecat-toast","description":"rff-rff-polecat-toast\n\nrole_type: polecat\nrig: rff\nagent_state: closed\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"closed","priority":2,"issue_type":"agent","created_at":"2026-01-25T13:24:16.893683+01:00","created_by":"mayor","updated_at":"2026-01-25T18:01:16.761168+01:00","closed_at":"2026-01-25T17:57:44.877608+01:00","close_reason":"polecat removed","labels":["gt:agent"]}
{"id":"rff-rff-polecat-valkyrie","title":"rff-rff-polecat-valkyrie","description":"rff-rff-polecat-valkyrie\n\nrole_type: polecat\nrig: rff\nagent_state: spawning\nhook_bead: rff-6io6\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"open","priority":2,"issue_type":"agent","created_at":"2026-01-25T17:59:07.23838+01:00","created_by":"mayor","updated_at":"2026-01-25T17:59:07.427428+01:00","labels":["gt:agent"]}
{"id":"rff-rff-polecat-warboy","title":"rff-rff-polecat-warboy","description":"rff-rff-polecat-warboy\n\nrole_type: polecat\nrig: rff\nagent_state: closed\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"closed","priority":2,"issue_type":"agent","created_at":"2026-01-25T18:06:38.276031+01:00","created_by":"mayor","updated_at":"2026-01-25T18:17:38.568575+01:00","closed_at":"2026-01-25T18:15:07.637335+01:00","close_reason":"polecat removed","labels":["gt:agent"]}
{"id":"rff-rff-refinery","title":"Refinery for rff - processes merge queue.","description":"Refinery for rff - processes merge queue.\n\nrole_type: refinery\nrig: rff\nagent_state: idle\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"open","priority":2,"issue_type":"agent","created_at":"2026-01-25T12:56:12.797595+01:00","created_by":"mandrigin","updated_at":"2026-01-25T12:56:12.797595+01:00","labels":["gt:agent"]}
{"id":"rff-rff-witness","title":"Witness for rff - monitors polecat health and progress.","description":"Witness for rff - monitors polecat health and progress.\n\nrole_type: witness\nrig: rff\nagent_state: idle\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"open","priority":2,"issue_type":"agent","created_at":"2026-01-25T12:56:12.511366+01:00","created_by":"mandrigin","updated_at":"2026-01-25T12:56:12.511366+01:00","labels":["gt:agent"]}
{"id":"rff-rig-rff","title":"rff","description":"Rig identity bead for rff.\n\nrepo: git@github.com:mandrigin/req-of-funds.git\nprefix: rff\nstate: active","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T12:56:13.59906+01:00","created_by":"mandrigin","updated_at":"2026-01-25T12:56:13.59906+01:00","labels":["gt:rig"]}
{"id":"rff-s0qo","title":"Implement invoice schema learning system","description":"attached_molecule: rff-wisp-4cwv\nattached_at: 2026-01-25T16:33:12Z\ndispatched_by: mayor\n\nPrivacy-first invoice OCR with reusable schemas:\n1. Schema Storage: Built-in schemas for common invoice types + user-created schemas in JSON/CoreData with versioning\n2. OCR Pipeline: Vision framework + Core ML for field classification (invoice#, date, total, line items, vendor) with confidence scoring\n3. Schema Editor UI: Visual overlay on invoice, drag-to-map detected text to schema fields, template selector\n4. AI-Assisted (opt-in): 'AI Analyze' button sends to OpenAI API only when user explicitly taps, returns suggested schema for review\n5. On-Device Learning: Track user corrections, update schema weights locally with Create ML, no cloud sync","status":"closed","priority":1,"issue_type":"epic","assignee":"rff/polecats/capable","created_at":"2026-01-25T17:32:01.070793+01:00","created_by":"mayor","updated_at":"2026-01-25T17:46:54.229621+01:00","closed_at":"2026-01-25T17:46:54.229621+01:00","close_reason":"Schema learning system implemented with InvoiceSchema, SchemaStore, FieldClassifier, AIAnalysisService, CorrectionHistoryService, and SchemaEditorView","dependencies":[{"issue_id":"rff-s0qo","depends_on_id":"rff-wisp-4cwv","type":"blocks","created_at":"2026-01-25T17:33:11.614065+01:00","created_by":"mayor"}]}
{"id":"rff-skta","title":"AI detection issues: 1) New schema not appearing after detection, 2) Total amount not being mapped to document fields","description":"attached_molecule: rff-wisp-s2ux\nattached_at: 2026-01-25T17:50:13Z\ndispatched_by: mayor\n\nAfter running AI analysis: the suggested schema name appears in the results but doesn't show up as a selectable schema. Also the total amount isn't being applied to the document even when detected. Check the saveSchema flow and field application logic.","status":"closed","priority":2,"issue_type":"task","assignee":"rff/polecats/imperator","created_at":"2026-01-25T18:49:42.698497+01:00","created_by":"mayor","updated_at":"2026-01-25T18:56:32.112336+01:00","closed_at":"2026-01-25T18:56:32.112336+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rff-skta","depends_on_id":"rff-wisp-s2ux","type":"blocks","created_at":"2026-01-25T18:50:12.653636+01:00","created_by":"mayor"}],"comments":[{"id":5,"issue_id":"rff-skta","author":"rff/polecats/imperator","text":"IMPLEMENTED: Fixed two AI detection issues:\n\n1. ConfirmationFormView not updating after AI analysis - Added .onChange observers for document properties (requestingOrganization, amount, currency, dueDate) to re-sync local editing state when document changes externally.\n\n2. Total amount parsing failing - Added parseAmount() helper that strips currency symbols ($, €, £, CHF), commas, and spaces before decimal parsing. Applied to both LibraryAIAnalysisResultSheet and AIAnalysisResultSheet.\n\nBuild verified: ✅ BUILD SUCCEEDED","created_at":"2026-01-25T17:56:11Z"}]}
{"id":"rff-sl9","title":"Digest: mol-witness-patrol","description":"Patrol cycle 1: Furiosa working on rff-air (Xcode setup). Received LIFECYCLE shutdown request but found unpushed work. Escalated RECOVERY_NEEDED to Mayor - git push failed with SSH permission denied.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:04:42.682186+01:00","updated_at":"2026-01-25T13:04:42.682186+01:00","closed_at":"2026-01-25T13:04:42.682105+01:00","close_reason":"Squashed from 10 wisps"}
{"id":"rff-sp09","title":"Digest: mol-witness-patrol","description":"Patrol 11: force-nuked furiosa/nux (clean but stuck on closed rff-3mq), slit completed earlier","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:58:28.707363+01:00","updated_at":"2026-01-25T13:58:28.707363+01:00","closed_at":"2026-01-25T13:58:28.707283+01:00","close_reason":"Squashed from 10 wisps","dependencies":[{"issue_id":"rff-sp09","depends_on_id":"rff-wisp-0ui","type":"parent-child","created_at":"2026-01-25T13:58:28.708258+01:00","created_by":"rff/witness"}]}
{"id":"rff-sw4n","title":"Digest: mol-witness-patrol","description":"Patrol 5: slit working, furiosa/nux idle","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:51:09.69508+01:00","updated_at":"2026-01-25T13:51:09.69508+01:00","closed_at":"2026-01-25T13:51:09.695011+01:00","close_reason":"Squashed from 10 wisps","dependencies":[{"issue_id":"rff-sw4n","depends_on_id":"rff-wisp-kj7","type":"parent-child","created_at":"2026-01-25T13:51:09.695894+01:00","created_by":"rff/witness"}]}
{"id":"rff-t43h","title":"Fix schema editor UX - mapping and interaction broken","description":"attached_molecule: rff-wisp-98do\nattached_at: 2026-01-25T17:17:58Z\ndispatched_by: mayor\n\nSchema editor UX issues:\n1. Can't map document fields to schema - interaction not working\n2. Auto-map button doesn't work\n3. Can't move or select elements in the editor\n4. Overall UX is confusing - unclear how to use\n\nNeed to:\n- Fix drag-and-drop selection of text regions\n- Make auto-map actually detect and map common fields\n- Add clear visual feedback when selecting/mapping\n- Add help text or tooltips explaining the workflow\n- Test that clicking on detected text creates a mapping","status":"hooked","priority":2,"issue_type":"task","assignee":"rff/polecats/warboy","created_at":"2026-01-25T18:17:23.357644+01:00","created_by":"mayor","updated_at":"2026-01-25T18:17:58.703918+01:00","dependencies":[{"issue_id":"rff-t43h","depends_on_id":"rff-wisp-98do","type":"blocks","created_at":"2026-01-25T18:17:57.564492+01:00","created_by":"mayor"}]}
{"id":"rff-tuso","title":"Add DocuSign-style editable confirmation form","description":"attached_molecule: rff-wisp-3v1n\nattached_at: 2026-01-25T15:40:09Z\ndispatched_by: mayor\n\nCreate side panel or overlay form showing extracted fields (amount, due date, organization) as editable TextFields. Include visual indicators for auto-extracted vs manually edited. Add Confirm button to finalize.","notes":"Implemented DocuSign-style editable confirmation form with: ConfirmationFormView showing organization/amount/date as editable TextFields, SourceBadge visual indicators for auto-extracted vs manually edited fields, HSplitView integration in DocumentDetailView for side-by-side PDF + form view, Confirm button that transitions document to underReview status","status":"closed","priority":2,"issue_type":"task","assignee":"rff/polecats/nux","created_at":"2026-01-25T16:22:42.035733+01:00","created_by":"mayor","updated_at":"2026-01-25T16:50:39.392184+01:00","closed_at":"2026-01-25T16:50:39.392184+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rff-tuso","depends_on_id":"rff-8iy7","type":"blocks","created_at":"2026-01-25T16:23:07.23923+01:00","created_by":"mayor"},{"issue_id":"rff-tuso","depends_on_id":"rff-wisp-1tua","type":"blocks","created_at":"2026-01-25T16:40:08.805836+01:00","created_by":"mayor"},{"issue_id":"rff-tuso","depends_on_id":"rff-wisp-3v1n","type":"blocks","created_at":"2026-01-25T16:42:20.561473+01:00","created_by":"mayor"}]}
{"id":"rff-u18g","title":"Add multi-currency support with grouping","description":"attached_molecule: rff-wisp-4yzd\nattached_at: 2026-01-25T16:01:41Z\ndispatched_by: mayor\n\nSupport multiple currencies (USD, EUR, GBP, etc.) for document amounts. Add ability to group/filter documents by currency. Include currency detection from OCR text and manual currency selection.","status":"closed","priority":2,"issue_type":"feature","assignee":"rff/polecats/furiosa","created_at":"2026-01-25T16:40:55.31046+01:00","created_by":"mayor","updated_at":"2026-01-25T17:12:31.995262+01:00","closed_at":"2026-01-25T17:12:31.995263+01:00","dependencies":[{"issue_id":"rff-u18g","depends_on_id":"rff-wisp-2j5m","type":"blocks","created_at":"2026-01-25T17:01:40.452123+01:00","created_by":"mayor"},{"issue_id":"rff-u18g","depends_on_id":"rff-wisp-8lcr","type":"blocks","created_at":"2026-01-25T17:03:38.001185+01:00","created_by":"mayor"},{"issue_id":"rff-u18g","depends_on_id":"rff-wisp-4yzd","type":"blocks","created_at":"2026-01-25T17:05:05.268727+01:00","created_by":"mayor"}]}
{"id":"rff-ugec","title":"Fix AI analysis Apply button - doesn't update document or save schema","description":"attached_molecule: rff-wisp-2iba\nattached_at: 2026-01-25T17:26:51Z\ndispatched_by: mayor\n\nAfter AI analysis completes and user clicks 'Apply':\n1. Document fields don't update with extracted values\n2. Schema is not saved\n\nNeed to:\n- Wire up Apply button to actually copy AI results to document fields (organization, amount, date, etc.)\n- Save the generated schema to SchemaStore\n- Dismiss the AI results sheet after applying\n- Show confirmation that values were applied","notes":"Implemented: Removed 'only if empty' guards so AI suggestions are always applied when user selects them. Added saveSchema() to create schemas in SchemaStore from AI analysis. Fixed in both DocumentEditorView and LibraryAIAnalysisResultSheet.","status":"closed","priority":2,"issue_type":"task","assignee":"rff/polecats/morsov","created_at":"2026-01-25T18:26:21.514882+01:00","created_by":"mayor","updated_at":"2026-01-25T18:32:30.151232+01:00","closed_at":"2026-01-25T18:32:30.151232+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rff-ugec","depends_on_id":"rff-wisp-2iba","type":"blocks","created_at":"2026-01-25T18:26:50.656234+01:00","created_by":"mayor"}]}
{"id":"rff-vnt","title":"Create Core ML document classifier with CreateML","description":"attached_molecule: rff-wisp-4gz\nattached_at: 2026-01-25T12:23:46Z\ndispatched_by: mayor\n\nTrain custom MLTextClassifier: 1) Prepare labeled training data with categories: invoice, purchase_order, grant_request, reimbursement. 2) Use Transfer Learning with Dynamic Embedding algorithm. 3) Train with minimum 10-20 examples per class. 4) Export .mlmodel. 5) Integrate with NLModel for prediction. 6) Use async prediction API for thread-safe batch processing.","status":"closed","priority":1,"issue_type":"task","assignee":"rff/polecats/capable","created_at":"2026-01-25T12:59:34.981004+01:00","created_by":"mayor","updated_at":"2026-01-25T13:34:39.176999+01:00","closed_at":"2026-01-25T13:34:39.176999+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rff-vnt","depends_on_id":"rff-air","type":"blocks","created_at":"2026-01-25T12:59:48.546084+01:00","created_by":"mayor"}],"comments":[{"id":2,"issue_id":"rff-vnt","author":"rff/polecats/capable","text":"Implemented document classifier:\n- DocumentCategory enum with 4 categories (invoice, purchase_order, grant_request, reimbursement)\n- DocumentClassifier actor with async prediction API using NLModel\n- Thread-safe batch classification using structured concurrency\n- Training data JSON with 20 examples per category (80 total)\n- TrainClassifier Swift Package tool using CreateML with ELMo Transfer Learning\n- Updated RFFDocument model with classification fields\n\nFiles added:\n- RFF/RFF/ML/DocumentCategory.swift\n- RFF/RFF/ML/DocumentClassifier.swift\n- RFF/RFF/Resources/TrainingData.json\n- Tools/TrainClassifier/Package.swift\n- Tools/TrainClassifier/Sources/main.swift\n\nFiles modified:\n- RFF/RFF/Models/RFFDocument.swift (added documentCategory and classificationConfidence fields)\n- .gitignore (added .build/ and .swiftpm/)","created_at":"2026-01-25T12:34:08Z"}]}
{"id":"rff-wair","title":"Replace highlight buttons with automatic field detection + legend","description":"attached_molecule: rff-wisp-1fqs\nattached_at: 2026-01-25T17:05:36Z\ndispatched_by: mayor\n\nIn Library document preview (Review tab):\n1. Remove 'Highlight Amounts' and 'Highlight Dates' buttons\n2. Automatically detect and highlight ALL known fields when viewing document:\n   - Amounts (green)\n   - Dates (blue)  \n   - Vendor/organization (orange)\n   - Invoice number (purple)\n   - etc.\n3. Add a legend panel showing what each color means\n4. Allow clicking on highlighted regions to see/edit the extracted value\n5. Use existing PDFTextFinder and schema field detection\n\nMake the preview immediately useful without manual button clicks.","notes":"Implemented: Replaced manual highlight buttons with automatic field detection on PDF load. Added color-coded highlights for different field types (amounts=green, dates=blue, vendor=orange, invoice number=purple). Added collapsible legend panel. Added click-to-select with edit panel for applying extracted values to document fields.","status":"closed","priority":2,"issue_type":"task","assignee":"rff/polecats/keeper","created_at":"2026-01-25T18:05:04.77369+01:00","created_by":"mayor","updated_at":"2026-01-25T18:27:21.867653+01:00","closed_at":"2026-01-25T18:27:21.867653+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rff-wair","depends_on_id":"rff-wisp-tl2d","type":"blocks","created_at":"2026-01-25T18:05:35.436636+01:00","created_by":"mayor"},{"issue_id":"rff-wair","depends_on_id":"rff-wisp-dpys","type":"blocks","created_at":"2026-01-25T18:10:16.577181+01:00","created_by":"mayor"},{"issue_id":"rff-wair","depends_on_id":"rff-wisp-1fqs","type":"blocks","created_at":"2026-01-25T18:12:55.257091+01:00","created_by":"mayor"}]}
{"id":"rff-ydft","title":"Digest: mol-witness-patrol","description":"Patrol 7: slit implementing entitlements fix","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:52:04.85378+01:00","updated_at":"2026-01-25T13:52:04.85378+01:00","closed_at":"2026-01-25T13:52:04.853701+01:00","close_reason":"Squashed from 10 wisps","dependencies":[{"issue_id":"rff-ydft","depends_on_id":"rff-wisp-mx3","type":"parent-child","created_at":"2026-01-25T13:52:04.854622+01:00","created_by":"rff/witness"}]}
{"id":"rff-ylt5","title":"Add CHF (Swiss Franc) to supported currencies","description":"attached_molecule: rff-wisp-vy6j\nattached_at: 2026-01-25T16:58:42Z\ndispatched_by: mayor\n\nAdd CHF to the Currency enum with proper symbol (CHF or Fr.) and formatting. Update currency selection throughout the app.","status":"closed","priority":2,"issue_type":"task","assignee":"rff/polecats/cheedo","created_at":"2026-01-25T17:46:56.792858+01:00","created_by":"mayor","updated_at":"2026-01-25T18:01:01.985888+01:00","closed_at":"2026-01-25T18:01:01.985888+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rff-ylt5","depends_on_id":"rff-wisp-1m1r","type":"blocks","created_at":"2026-01-25T17:51:51.344518+01:00","created_by":"mayor"},{"issue_id":"rff-ylt5","depends_on_id":"rff-wisp-vy6j","type":"blocks","created_at":"2026-01-25T17:58:41.329308+01:00","created_by":"mayor"}]}
{"id":"rff-ytq3","title":"Fix Schema Editor - integrate with Library document selection","description":"attached_molecule: rff-wisp-f0z8\nattached_at: 2026-01-25T17:11:31Z\ndispatched_by: mayor\n\nSchema Editor shows 'open a document to analyze its schema' but:\n1. File-\u003eOpen doesn't work with PDFs in this context\n2. Library document selection doesn't connect to Schema Editor\n\nFix by:\n1. Add 'Edit Schema' button in Library document detail view that opens SchemaEditorView WITH the current document\n2. SchemaEditorView should accept a document parameter and load its PDF/image\n3. Remove the useless 'open a document' prompt - always require document context\n4. OR add a document picker directly in SchemaEditorView that lists Library documents\n\nThe Schema Editor must work with documents from the Library, not just file-based documents.","notes":"Implemented: Added Edit Schema button in DocumentDetailView toolbar, SchemaEditorView now accepts documentURL parameter and auto-loads on appear. Build verified.","status":"closed","priority":2,"issue_type":"task","assignee":"rff/polecats/warboy","created_at":"2026-01-25T18:11:01.445976+01:00","created_by":"mayor","updated_at":"2026-01-25T18:15:05.915973+01:00","closed_at":"2026-01-25T18:15:05.915973+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rff-ytq3","depends_on_id":"rff-wisp-f0z8","type":"blocks","created_at":"2026-01-25T18:11:30.48512+01:00","created_by":"mayor"}]}
{"id":"rff-zf5w","title":"AI extraction: Recognize 'Balance Due' as total amount - update prompt to handle synonyms (Amount Due, Grand Total, Balance Due)","description":"attached_molecule: rff-wisp-u3di\nattached_at: 2026-01-25T17:49:22Z\ndispatched_by: mayor\n\nInvoice at /Users/mandrigin/Downloads/invoices-01-2026/Invoice IM-2026-01.pdf has 'Balance Due: CHF 22,000.00' but no explicit 'Total:' line. The AI prompt should recognize these synonyms. Also add test cases for field mapping.","status":"closed","priority":2,"issue_type":"task","assignee":"rff/polecats/ace","created_at":"2026-01-25T18:48:50.073977+01:00","created_by":"mayor","updated_at":"2026-01-25T18:54:46.701362+01:00","closed_at":"2026-01-25T18:54:46.701362+01:00","close_reason":"Closed","dependencies":[{"issue_id":"rff-zf5w","depends_on_id":"rff-wisp-u3di","type":"blocks","created_at":"2026-01-25T18:49:21.883371+01:00","created_by":"mayor"}]}
