{"id":"in-2kx","title":"Phase 7: OCRExtractor (Vision)","description":"Implement Vision OCR:\n- VNRecognizeTextRequest with .accurate level\n- Configurable recognitionLanguages\n- usesLanguageCorrection = true\n- Render PDF pages to CGImage at 150 DPI\n- Return text + average confidence score\n- 30 second timeout per file\n\nReference: /Users/mandrigin/Desktop/invoices-spec.md sections 3.2, 6.1","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-13T16:10:56.238542+01:00","created_by":"mayor","updated_at":"2026-01-13T16:10:56.238542+01:00","dependencies":[{"issue_id":"in-2kx","depends_on_id":"in-2xj","type":"blocks","created_at":"2026-01-13T16:11:32.93032+01:00","created_by":"mayor"}]}
{"id":"in-2xj","title":"Phase 2: ConfigManager and data models","description":"dispatched_by: mayor\n\nImplement configuration system:\n- ConfigManager: load/save JSON config from ~/Library/Application Support/InvoiceFiler/\n- CompanyConfig struct (name, aliases, taxIds, domains)\n- All config parameters from spec section 2.1-2.2\n- UserDefaults for simple settings\n- Config validation\n\nReference: /Users/mandrigin/Desktop/invoices-spec.md section 2, 5.2","status":"closed","priority":1,"issue_type":"task","assignee":"invoices/polecats/furiosa","created_at":"2026-01-13T16:10:55.156719+01:00","created_by":"mayor","updated_at":"2026-01-13T16:29:43.579333+01:00","closed_at":"2026-01-13T16:29:43.579333+01:00","close_reason":"Closed","dependencies":[{"issue_id":"in-2xj","depends_on_id":"in-8f8","type":"blocks","created_at":"2026-01-13T16:11:32.348048+01:00","created_by":"mayor"}]}
{"id":"in-3to","title":"Phase 10: CompanyMatcher","description":"Implement company matching:\n- Multi-signal: exact name, alias, fuzzy, tax ID, domain/email\n- Text normalization (lowercase, remove suffixes like Inc/LLC/Ltd)\n- Levenshtein fuzzy matching with sliding window\n- Configurable companyMatchThreshold (default 0.8)\n- Handle multiple matches (highest confidence wins)\n- Optional filename hint boost\n\nReference: /Users/mandrigin/Desktop/invoices-spec.md section 3.4","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-13T16:11:19.002983+01:00","created_by":"mayor","updated_at":"2026-01-13T16:11:19.002983+01:00","dependencies":[{"issue_id":"in-3to","depends_on_id":"in-qg3","type":"blocks","created_at":"2026-01-13T16:11:33.317977+01:00","created_by":"mayor"}]}
{"id":"in-787","title":"Phase 5: Debouncer","description":"Implement debounce and stability:\n- Per-file timers (configurable debounceInterval, default 3s)\n- Cancel/reset timer on new events for same file\n- Deduplication via Set\u003cString\u003e of canonical paths\n- Stability check: compare file size across 500ms\n- Max 5 stability checks then skip as unstable\n\nReference: /Users/mandrigin/Desktop/invoices-spec.md section 3.1","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-13T16:10:55.80558+01:00","created_by":"mayor","updated_at":"2026-01-13T16:10:55.80558+01:00","dependencies":[{"issue_id":"in-787","depends_on_id":"in-edr","type":"blocks","created_at":"2026-01-13T16:11:32.681932+01:00","created_by":"mayor"}]}
{"id":"in-7kk","title":"Witness Patrol","description":"Per-rig worker monitor patrol loop with progressive nudging.","status":"open","priority":2,"issue_type":"molecule","created_at":"2026-01-13T15:58:49.441064+01:00","created_by":"mandrigin","updated_at":"2026-01-13T15:58:49.441064+01:00"}
{"id":"in-8f8","title":"Phase 1: Xcode project setup","description":"dispatched_by: mayor\n\nCreate macOS menu bar app project:\n- Swift 5.9+, macOS 13.0+ target\n- LSUIElement=true in Info.plist (no dock icon)\n- Non-sandboxed entitlements\n- Basic NSStatusItem menu bar icon\n- App delegate structure\n\nReference: /Users/mandrigin/Desktop/invoices-spec.md sections 1, 6.3, 6.4","status":"closed","priority":1,"issue_type":"task","assignee":"invoices/polecats/furiosa","created_at":"2026-01-13T16:10:54.949929+01:00","created_by":"mayor","updated_at":"2026-01-13T16:16:47.760007+01:00","closed_at":"2026-01-13T16:16:47.760007+01:00","close_reason":"Closed"}
{"id":"in-8x9","title":"Invoice Filer macOS App","description":"Content-aware macOS menu bar app that monitors directories for invoice files, uses OCR/PDF text extraction to identify invoices and match company names, and auto-files to monthly folders. See /Users/mandrigin/Desktop/invoices-spec.md for full specification.","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-13T16:10:28.704206+01:00","created_by":"mayor","updated_at":"2026-01-13T16:10:28.704206+01:00"}
{"id":"in-agv","title":"Phase 6: PDFExtractor (PDFKit)","description":"Implement PDF text extraction:\n- PDFKit PDFDocument/PDFPage.string\n- Respect maxOCRPages limit\n- Detect scanned PDFs (\u003c 50 words = needs OCR)\n- Return ExtractionResult with method, confidence, pageCount\n- Handle corrupted/password-protected PDFs gracefully\n\nReference: /Users/mandrigin/Desktop/invoices-spec.md sections 3.2, 6.2","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-13T16:10:56.021304+01:00","created_by":"mayor","updated_at":"2026-01-13T16:10:56.021304+01:00","dependencies":[{"issue_id":"in-agv","depends_on_id":"in-2xj","type":"blocks","created_at":"2026-01-13T16:11:32.857805+01:00","created_by":"mayor"}]}
{"id":"in-b80","title":"Deacon Patrol","description":"Mayor's daemon patrol loop for handling callbacks, health checks, and cleanup.","status":"open","priority":2,"issue_type":"molecule","created_at":"2026-01-13T15:58:49.279689+01:00","created_by":"mandrigin","updated_at":"2026-01-13T15:58:49.279689+01:00"}
{"id":"in-blb","title":"Phase 12: Organizer and Mover","description":"Implement file organization:\n- Folder naming: invoices-MM-YYYY\n- Destination resolution (configurable root or source dir)\n- Idempotency check (already in invoice folder)\n- Atomic move with FileManager.moveItem\n- Collision handling with -1, -2 suffix (max 999)\n- Cross-volume: copy + verify + remove\n- Locked file retry (3 retries, 30s apart)\n\nReference: /Users/mandrigin/Desktop/invoices-spec.md sections 3.6, 3.7","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-13T16:11:19.412871+01:00","created_by":"mayor","updated_at":"2026-01-13T16:11:19.412871+01:00","dependencies":[{"issue_id":"in-blb","depends_on_id":"in-rw4","type":"blocks","created_at":"2026-01-13T16:11:33.563657+01:00","created_by":"mayor"}]}
{"id":"in-bol","title":"Phase 13: StatusMenu UI","description":"dispatched_by: mayor\n\nMenu bar interface:\n- NSStatusItem with icon (green/yellow/red badge)\n- Processing indicator (animated during OCR)\n- Quick stats: 'Last 24h: X filed, Y skipped'\n- Last processed file + result\n- Open log in Console.app\n- Settings/preferences access\n- Quit option\n\nReference: /Users/mandrigin/Desktop/invoices-spec.md section 4 (Observability)","status":"closed","priority":2,"issue_type":"task","assignee":"invoices/polecats/slit","created_at":"2026-01-13T16:11:19.617514+01:00","created_by":"mayor","updated_at":"2026-01-13T16:24:03.580443+01:00","closed_at":"2026-01-13T16:24:03.580443+01:00","close_reason":"Closed","dependencies":[{"issue_id":"in-bol","depends_on_id":"in-8f8","type":"blocks","created_at":"2026-01-13T16:11:33.633022+01:00","created_by":"mayor"}]}
{"id":"in-edr","title":"Phase 4: FileWatcher (FSEvents)","description":"Implement directory monitoring:\n- FSEvents API for directory watching\n- Handle: file creation, rename-into-directory, modification\n- Support recursive option per path\n- Filter by supported extensions\n- Exclusion patterns (glob matching)\n\nReference: /Users/mandrigin/Desktop/invoices-spec.md section 3.1","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-13T16:10:55.593862+01:00","created_by":"mayor","updated_at":"2026-01-13T16:10:55.593862+01:00","dependencies":[{"issue_id":"in-edr","depends_on_id":"in-2xj","type":"blocks","created_at":"2026-01-13T16:11:32.607733+01:00","created_by":"mayor"}]}
{"id":"in-grc","title":"Phase 14: Integration and launch","description":"Wire everything together:\n- Main processing loop (see spec section 5.3 pseudocode)\n- ProcessingQueue with maxConcurrent=2 for OCR\n- SMAppService.mainApp for launch at login\n- Full Disk Access prompt on first launch\n- Error handling for all edge cases (section 7)\n\nReference: /Users/mandrigin/Desktop/invoices-spec.md sections 5.3, 6.3, 7","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-13T16:11:19.827063+01:00","created_by":"mayor","updated_at":"2026-01-13T16:11:19.827063+01:00","dependencies":[{"issue_id":"in-grc","depends_on_id":"in-blb","type":"blocks","created_at":"2026-01-13T16:11:33.805073+01:00","created_by":"mayor"},{"issue_id":"in-grc","depends_on_id":"in-bol","type":"blocks","created_at":"2026-01-13T16:11:33.877912+01:00","created_by":"mayor"},{"issue_id":"in-grc","depends_on_id":"in-xop","type":"blocks","created_at":"2026-01-13T16:11:33.944953+01:00","created_by":"mayor"},{"issue_id":"in-grc","depends_on_id":"in-3to","type":"blocks","created_at":"2026-01-13T16:11:34.019092+01:00","created_by":"mayor"}]}
{"id":"in-invoices-crew-mandrigin","title":"Crew worker mandrigin in invoices - human-managed persistent workspace.","description":"Crew worker mandrigin in invoices - human-managed persistent workspace.\n\nrole_type: crew\nrig: invoices\nagent_state: idle\nhook_bead: null\nrole_bead: hq-crew-role\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"open","priority":2,"issue_type":"agent","created_at":"2026-01-13T15:58:59.791283+01:00","created_by":"mandrigin","updated_at":"2026-01-13T15:58:59.897732+01:00","labels":["gt:agent"]}
{"id":"in-invoices-polecat-furiosa","title":"in-invoices-polecat-furiosa","description":"in-invoices-polecat-furiosa\n\nrole_type: polecat\nrig: invoices\nagent_state: spawning\nhook_bead: in-8f8\nrole_bead: hq-polecat-role\ncleanup_status: has_uncommitted\nactive_mr: in-3qf\nnotification_level: null","status":"tombstone","priority":2,"issue_type":"agent","created_at":"2026-01-13T16:11:46.875111+01:00","created_by":"mayor","updated_at":"2026-01-13T16:26:11.215471+01:00","labels":["gt:agent"],"deleted_at":"2026-01-13T16:23:11.626808+01:00","deleted_by":"invoices/witness","delete_reason":"delete","original_type":"agent"}
{"id":"in-invoices-polecat-nux","title":"in-invoices-polecat-nux","description":"in-invoices-polecat-nux\n\nrole_type: polecat\nrig: invoices\nagent_state: spawning\nhook_bead: in-xzq\nrole_bead: hq-polecat-role\ncleanup_status: has_uncommitted\nactive_mr: in-qsi\nnotification_level: null","status":"tombstone","priority":2,"issue_type":"agent","created_at":"2026-01-13T16:20:58.22981+01:00","created_by":"mayor","updated_at":"2026-01-13T16:27:09.056388+01:00","labels":["gt:agent"],"deleted_at":"2026-01-13T16:27:09.056388+01:00","deleted_by":"invoices/polecats/nux","delete_reason":"delete","original_type":"agent"}
{"id":"in-invoices-polecat-slit","title":"in-invoices-polecat-slit","description":"in-invoices-polecat-slit\n\nrole_type: polecat\nrig: invoices\nagent_state: spawning\nhook_bead: in-bol\nrole_bead: hq-polecat-role\ncleanup_status: has_uncommitted\nactive_mr: in-bxf\nnotification_level: null","status":"tombstone","priority":2,"issue_type":"agent","created_at":"2026-01-13T16:21:24.628663+01:00","created_by":"mayor","updated_at":"2026-01-13T16:24:24.988146+01:00","labels":["gt:agent"],"deleted_at":"2026-01-13T16:24:24.988146+01:00","deleted_by":"invoices/polecats/slit","delete_reason":"delete","original_type":"agent"}
{"id":"in-invoices-refinery","title":"Refinery for invoices - processes merge queue.","description":"Refinery for invoices - processes merge queue.\n\nrole_type: refinery\nrig: invoices\nagent_state: idle\nhook_bead: null\nrole_bead: hq-refinery-role\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"open","priority":2,"issue_type":"agent","created_at":"2026-01-13T15:58:48.982734+01:00","created_by":"mandrigin","updated_at":"2026-01-13T15:58:49.093873+01:00","labels":["gt:agent"]}
{"id":"in-invoices-witness","title":"Witness for invoices - monitors polecat health and progress.","description":"Witness for invoices - monitors polecat health and progress.\n\nrole_type: witness\nrig: invoices\nagent_state: idle\nhook_bead: null\nrole_bead: hq-witness-role\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"open","priority":2,"issue_type":"agent","created_at":"2026-01-13T15:58:48.642034+01:00","created_by":"mandrigin","updated_at":"2026-01-13T15:58:48.752752+01:00","labels":["gt:agent"]}
{"id":"in-iru","title":"Refinery Patrol","description":"Merge queue processor patrol loop with verification gates.","status":"open","priority":2,"issue_type":"molecule","created_at":"2026-01-13T15:58:49.60109+01:00","created_by":"mandrigin","updated_at":"2026-01-13T15:58:49.60109+01:00"}
{"id":"in-qg3","title":"Phase 8: ContentExtractor orchestrator","description":"Orchestrate PDF/OCR extraction:\n- Try PDFKit first for PDFs\n- Fall back to Vision OCR if \u003c 50 words or scanned\n- Direct OCR for images (PNG/JPG/JPEG/HEIC/TIFF/WEBP)\n- Combine results for hybrid documents\n- Track extraction method and timing\n\nReference: /Users/mandrigin/Desktop/invoices-spec.md section 3.2","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-13T16:10:56.448282+01:00","created_by":"mayor","updated_at":"2026-01-13T16:10:56.448282+01:00","dependencies":[{"issue_id":"in-qg3","depends_on_id":"in-agv","type":"blocks","created_at":"2026-01-13T16:11:32.998897+01:00","created_by":"mayor"},{"issue_id":"in-qg3","depends_on_id":"in-2kx","type":"blocks","created_at":"2026-01-13T16:11:33.066041+01:00","created_by":"mayor"}]}
{"id":"in-rig-invoices","title":"invoices","description":"Rig identity bead for invoices.\n\nrepo: git@github.com:mandrigin/invoice-monitor.git\nprefix: in\nstate: active","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-13T15:58:49.73496+01:00","created_by":"mandrigin","updated_at":"2026-01-13T15:58:49.73496+01:00","labels":["gt:rig"]}
{"id":"in-rw4","title":"Phase 11: DateExtractor","description":"Extract invoice dates from content:\n- Regex patterns for various date formats (ISO, US, EU, written)\n- Look near 'Invoice Date' / 'Date' labels\n- Sanity check: not future, not \u003e 2 years old\n- Fallback cascade: extracted → file creation → file mod → current\n- Support configurable dateSource setting\n\nReference: /Users/mandrigin/Desktop/invoices-spec.md section 3.5","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-13T16:11:19.206837+01:00","created_by":"mayor","updated_at":"2026-01-13T16:11:19.206837+01:00","dependencies":[{"issue_id":"in-rw4","depends_on_id":"in-qg3","type":"blocks","created_at":"2026-01-13T16:11:33.393038+01:00","created_by":"mayor"}]}
{"id":"in-xop","title":"Phase 9: InvoiceClassifier","description":"Implement invoice detection:\n- Keyword taxonomy with weights (primary, secondary, financial, payment, reference, negative)\n- Structure pattern detection (invoice#, currency, date, tax ID, line items)\n- Combined keyword + structure scoring\n- Normalize to 0.0-1.0 confidence\n- Configurable invoiceConfidenceThreshold (default 0.7)\n\nReference: /Users/mandrigin/Desktop/invoices-spec.md section 3.3","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-13T16:11:18.795085+01:00","created_by":"mayor","updated_at":"2026-01-13T16:11:18.795085+01:00","dependencies":[{"issue_id":"in-xop","depends_on_id":"in-qg3","type":"blocks","created_at":"2026-01-13T16:11:33.2429+01:00","created_by":"mayor"}]}
{"id":"in-xzq","title":"Phase 3: Logger (JSONL)","description":"dispatched_by: mayor\n\nImplement structured logging:\n- JSONL format at ~/Library/Logs/InvoiceFiler/moves.jsonl\n- LogEntry struct with all fields from spec section 3.8\n- Append-only with fflush after each entry\n- Log rotation when file \u003e 10MB\n- Keep last 12 rotated files\n\nReference: /Users/mandrigin/Desktop/invoices-spec.md section 3.8","status":"closed","priority":1,"issue_type":"task","assignee":"invoices/polecats/nux","created_at":"2026-01-13T16:10:55.382987+01:00","created_by":"mayor","updated_at":"2026-01-13T16:25:02.436041+01:00","closed_at":"2026-01-13T16:25:02.436041+01:00","close_reason":"Closed","dependencies":[{"issue_id":"in-xzq","depends_on_id":"in-8f8","type":"blocks","created_at":"2026-01-13T16:11:32.430108+01:00","created_by":"mayor"}]}
